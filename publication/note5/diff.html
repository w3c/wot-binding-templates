<!doctype html>
<html lang=en><head>
  <meta name=generator content="HTML Tidy for HTML5 for Apple macOS version 5.8.0">
  <meta charset=utf-8>
  <meta name=generator content="ReSpec 35.5.1">
  <meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <style>
  dfn{cursor:pointer}
  .dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;background:var(--indextable-hover-bg,#fff);color:#000;color:var(--text,#000);box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);box-shadow:0 1em 3em -.4em var(--tocsidebar-shadow,rgba(0,0,0,.3)),0 0 1px 1px var(--tocsidebar-shadow,rgba(0,0,0,.05));border-radius:2px}
  .dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
  .dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;border-bottom-color:var(--indextable-hover-bg,#fff);top:0}
  .dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1;border-bottom-color:var(--indextable-hover-bg,#a2a9b1)}
  .dfn-panel *{margin:0}
  .dfn-panel b{display:block;color:#000;color:var(--text,#000);margin-top:.25em}
  .dfn-panel ul a[href]{color:#333;color:var(--text,#333)}
  .dfn-panel>div{display:flex}
  .dfn-panel a.self-link{font-weight:700;margin-right:auto}
  .dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
  .dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
  .dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
  .dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
  .dfn-panel a[href]:hover{border-bottom-width:1px}
  .dfn-panel ul{padding:0}
  .dfn-panel li{margin-left:1em}
  .dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
  </style>
  <meta name=color-scheme content="light dark">
  <title>Web of Things (WoT) Binding Templates</title>
  <style id=respec-mainstyle>
  @keyframes pop{
  0%{transform:scale(1,1)}
  25%{transform:scale(1.25,1.25);opacity:.75}
  100%{transform:scale(1,1)}
  }
  a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
  a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
  a.bibref{text-decoration:none}
  .respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
  .respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
  @supports not (text-decoration:red wavy underline){
  .respec-offending-element:not(pre){display:inline-block}
  .respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
  }
  #references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
  cite .bibref{font-style:italic}
  a[href].orcid{padding-left:4px;padding-right:4px}
  a[href].orcid>svg{margin-bottom:-2px}
  ol.tof,ul.tof{list-style:none outside none}
  .caption{margin-top:.5em;font-style:italic}
  #issue-summary>ul{column-count:2}
  #issue-summary li{list-style:none;display:inline-block}
  details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
  details.respec-tests-details>*{padding-right:2em}
  details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
  details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
  details.respec-tests-details>ul{width:100%;margin-top:-.3em}
  details.respec-tests-details>li{padding-left:1em}
  .self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
  aside.example .marker>a.self-link{color:inherit}
  .header-wrapper{display:flex;align-items:baseline}
  :is(h2,h3,h4,h5,h6):not(#toc>h2,#abstract>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}
  :is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-1.1em;font-size:1rem;opacity:.5}
  :is(h2,h3,h4,h5,h6)+a.self-link::before{content:"Â§";text-decoration:none;color:var(--heading-text)}
  :is(h2,h3)+a.self-link{top:-.2em}
  :is(h4,h5,h6)+a.self-link::before{color:#000}
  @media (max-width:767px){
  dd{margin-left:0}
  }
  @media print{
  .removeOnSave{display:none}
  }
  </style>
  <meta name=description content="W3C Web of Things enables applications to interact with and orchestrate connected Things at the Web scale. The standardized abstract interaction model exposed by the WoT Thing Description enables applications to scale and evolve independently of the individual Things.">
  <link rel=canonical href="https://www.w3.org/TR/wot-binding-templates/">
  <style>
  var:hover{text-decoration:underline;cursor:pointer}
  var.respec-hl{color:var(--color,#000);background-color:var(--bg-color);box-shadow:0 0 0 2px var(--bg-color)}
  @media (prefers-color-scheme:dark){
  var.respec-hl{filter:saturate(.9) brightness(.9)}
  }
  var.respec-hl-c1{--bg-color:#f4d200}
  var.respec-hl-c2{--bg-color:#ff87a2}
  var.respec-hl-c3{--bg-color:#96e885}
  var.respec-hl-c4{--bg-color:#3eeed2}
  var.respec-hl-c5{--bg-color:#eacfb6}
  var.respec-hl-c6{--bg-color:#82ddff}
  var.respec-hl-c7{--bg-color:#ffbcf2}
  @media print{
  var.respec-hl{background:0 0;color:#000;box-shadow:unset}
  }
  </style>
  <style>
  var{position:relative;cursor:pointer}
  var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
  var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#222}
  var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#222;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
  var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
  </style>
  <script id=initialUserConfig type="application/json">
  {
  "specStatus": "NOTE",
  "processVersion": 2017,
  "shortName": "wot-binding-templates",
  "copyrightStart": 2017,
  "group": "wg/wot",
  "noRecTrack": true,
  "wgPublicList": "public-wot-wg",
  "edDraftURI": "https://w3c.github.io/wot-binding-templates/",
  "github": "https://github.com/w3c/wot-binding-templates",
  "issueBase": "https://www.github.com/w3c/wot-binding-templates/issues",
  "editors": [
    {
      "name": "Michael Koster",
      "w3cid": "110658",
      "company": "Invited Expert",
      "companyURL": "https://github.com/mjkoster/"
    },
    {
      "name": "Ege Korkan",
      "w3cid": "110131",
      "company": "Siemens AG",
      "companyURL": "https://www.siemens.com/"
    }
  ],
  "otherLinks": [
    {
      "key": "Contributors",
      "data": [
        {
          "value": "In the GitHub repository",
          "href": "https://github.com/w3c/wot-binding-templates/graphs/contributors"
        }
      ]
    },
    {
      "key": "Repository",
      "data": [
        {
          "value": "We are on GitHub",
          "href": "https://github.com/w3c/wot-binding-templates/"
        },
        {
          "value": "File a bug",
          "href": "https://github.com/w3c/wot-binding-templates/issues"
        }
      ]
    }
  ],
  "publishISODate": "2025-09-13T00:00:00.000Z",
  "generatedSubtitle": "W3C Group Note 13 September 2025"
  }
  </script>
  <link rel=stylesheet href="https://www.w3.org/StyleSheets/TR/2021/W3C-NOTE">
  <link rel=stylesheet media="" href="https://www.w3.org/StyleSheets/TR/2021/dark.css">
<style type='text/css'>
:root {
	--diff-old-bg: #fbb;
	--diff-chg-bg: lime;
	--diff-new-bg: yellow;
}
@media (prefers-color-scheme: dark) {
:root:has(meta[name="color-scheme"][content*="dark"]) {
	--diff-old-bg: #a11;
	--diff-chg-bg: #191;
	--diff-new-bg: #441;
}}

.diff-new { background-color: var(--diff-new-bg); }
.diff-new:before, .diff-new:after { content: "\2191" }
.diff-chg { background-color: var(--diff-chg-bg); }
.diff-chg:before, .diff-chg:after { content: "\2195" }
.diff-old { text-decoration: line-through; background-color: var(--diff-old-bg); }
.diff-old:before, .diff-old:after { content: "\2193" }
</style>
<script src="https://w3c.github.io/htmldiff-nav/index.js"></script></head>
<body class="h-entry informative darkmode">
<div class=head>
<p class=logos>
<a class=logo href="https://www.w3.org/">
<img crossorigin="" alt=W3C height=48 src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width=72>
</a>
</p>
<h1 id=title class=title>
Web
of
Things
(WoT)
Binding
Templates
</h1>
<p id=w3c-state>
<a href="https://www.w3.org/standards/types#NOTE">
W3C
Group
Note
</a>
<del class="diff-old">28
May
2024
</del>
<time class=dt-published datetime=2025-09-13>
<ins class="diff-chg">13
September
2025
</ins>
</time>
</p>
<details open>
<summary>
More
details
about
this
document
</summary>
<dl>
<dt>
This
version:
</dt>
<dd>
<del class="diff-old">https://www.w3.org/TR/2024/NOTE-wot-binding-templates-20240528/
</del>
<a class=u-url href="https://www.w3.org/TR/2025/NOTE-wot-binding-templates-20250913/">
<ins class="diff-chg">https://www.w3.org/TR/2025/NOTE-wot-binding-templates-20250913/
</ins>
</a>
</dd>
<dt>
Latest
published
version:
</dt>
<dd>
<a href="https://www.w3.org/TR/wot-binding-templates/">
https://www.w3.org/TR/wot-binding-templates/
</a>
</dd>
<dt>
Latest
editor's
draft:
</dt>
<dd>
<a href="https://w3c.github.io/wot-binding-templates/">
https://w3c.github.io/wot-binding-templates/
</a>
</dd>
<dt>
History:
</dt>
<dd>
<a href="https://www.w3.org/standards/history/wot-binding-templates/">
https://www.w3.org/standards/history/wot-binding-templates/
</a>
</dd>
<dd>
<a href="https://github.com/w3c/wot-binding-templates/commits/">
Commit
history
</a>
</dd>
<dt>
Editors:
</dt>
<dd class="editor p-author h-card vcard" data-editor-id=110658>
<span class="p-name fn">
Michael
Koster
</span>
(
<a class="p-org org h-org" href="https://github.com/mjkoster/">
Invited
Expert
</a>
)
</dd>
<dd class="editor p-author h-card vcard" data-editor-id=110131>
<span class="p-name fn">
Ege
Korkan
</span>
(
<a class="p-org org h-org" href="https://www.siemens.com/">
Siemens
AG
</a>
)
</dd>
<dt>
Feedback:
</dt>
<dd>
<a href="https://github.com/w3c/wot-binding-templates/">
GitHub
w3c/wot-binding-templates
</a>
(
<a href="https://github.com/w3c/wot-binding-templates/pulls/">
pull
requests
</a>,
<a href="https://github.com/w3c/wot-binding-templates/issues/new/choose">
new
issue
</a>,
<a href="https://github.com/w3c/wot-binding-templates/issues/">
open
issues
</a>
)
</dd>
<dd>
<a href="mailto:public-wot-wg@w3.org?subject=%5Bwot-binding-templates%5D%20YOUR%20TOPIC%20HERE">
public-wot-wg@w3.org
</a>
with
subject
line
<kbd>
[wot-binding-templates]
<em>
â€¦
message
topic
â€¦
</em>
</kbd>
(
<a rel=discussion href="https://lists.w3.org/Archives/Public/public-wot-wg">
archives
</a>
)
</dd>
<dt>
Contributors
</dt>
<dd>
<a href="https://github.com/w3c/wot-binding-templates/graphs/contributors">
In
the
GitHub
repository
</a>
</dd>
<dt>
Repository
</dt>
<dd>
<a href="https://github.com/w3c/wot-binding-templates/">
We
are
on
GitHub
</a>
</dd>
<dd>
<a href="https://github.com/w3c/wot-binding-templates/issues">
File
a
bug
</a>
</dd>
</dl>
</details>
<p class=copyright>
<a href="https://www.w3.org/policies/#copyright">
Copyright
</a>
Â©
<del class="diff-old">2017-2024
</del>
<ins class="diff-chg">2017-2025
</ins>
<a href="https://www.w3.org/">
World
Wide
Web
Consortium
</a>.
<abbr title="World Wide Web Consortium">
W3C
</abbr>
<sup>
Â®
</sup>
<a href="https://www.w3.org/policies/#Legal_Disclaimer">
liability
</a>,
<a href="https://www.w3.org/policies/#W3C_Trademarks">
trademark
</a>
and
<a rel=license href="https://www.w3.org/copyright/software-license-2023/" title="W3C Software and Document Notice and License">
permissive
document
license
</a>
rules
apply.
</p>
<hr title="Separator for header">
</div>
<section id=abstract class=introductory>
<h2>
Abstract
</h2>
<p>
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Web
of
Things
enables
applications
to
interact
with
and
orchestrate
connected
Things
at
the
Web
scale.
The
standardized
abstract
interaction
model
exposed
by
the
WoT
Thing
Description
enables
applications
to
scale
and
evolve
independently
of
the
individual
Things.
</p>
<p>
Many
network-level
protocols,
standards
and
platforms
for
connected
Things
have
already
been
developed,
and
have
millions
of
devices
deployed
in
the
field
today.
These
standards
are
converging
on
a
common
set
of
transport
protocols
and
transfer
layers,
but
each
has
peculiar
content
formats,
payload
schemas,
and
data
types.
</p>
<p>
Despite
using
unique
formats
and
data
models,
the
high-level
interactions
exposed
by
most
connected
things
can
be
modeled
using
the
Property,
Action,
and
Event
interaction
affordances
of
the
WoT
Thing
Description.
</p>
<p>
Binding
Templates
<ins class="diff-new">(now
called
just
Bindings)
</ins>
enable
a
Thing
Description
to
be
adapted
to
a
specific
protocol,
data
payload
<del class="diff-old">formats
or
platforms
</del>
<ins class="diff-chg">format,
and/or
platform
</ins>
that
<del class="diff-old">combine
</del>
<ins class="diff-chg">combines
</ins>
both
in
specific
ways.
This
is
done
through
additional
descriptive
vocabularies,
Thing
Models
and
examples
that
aim
to
guide
the
implementors
of
Things
and
Consumers
alike.
</p>
<p>
This
<del class="diff-old">core
specification
</del>
<ins class="diff-chg">retired
</ins>
document
<del class="diff-old">acts
as
a
base
and
explains
how
other
binding
templates
should
be
designed.
Concrete
binding
templates
are
then
provided
in
their
respective
documents,
referred
to
as
subspecifications,
that
are
linked
</del>
<ins class="diff-chg">used
</ins>
to
<del class="diff-old">from
</del>
<ins class="diff-chg">provide
information
about
these
bindings.
Please
read
the
Status
of
</ins>
this
<del class="diff-old">document.
</del>
<ins class="diff-chg">Document
section
to
learn
more.
</ins>
</p>
</section>
<section id=sotd class=introductory>
<h2>
Status
of
This
Document
</h2>
<p>
<em>
This
section
describes
the
status
of
this
document
at
the
time
of
its
publication.
A
list
of
current
<abbr title="World Wide Web Consortium">
W3C
</abbr>
publications
and
the
latest
revision
of
this
technical
report
can
be
found
in
the
<a href="https://www.w3.org/TR/">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
<del class="diff-old">technical
reports
</del>
<ins class="diff-chg">standards
and
drafts
</ins>
index
<del class="diff-old">at
https://www.w3.org/TR/.
</del>
</a>.
</em>
</p>
<del class="diff-old">Note
</del>
<div style="border: 5px solid red; border-radius: 10px; padding: 1em; margin: 1em; text-align: center; font-weight: 300; font-size: 120%;">
<ins class="diff-chg">ðŸš©
</ins><p>
<del class="diff-old">:
Future
Work
The
Working
Group
</del>
<br>
<ins class="diff-chg">This
document
is
retired
and
</ins>
will
<del class="diff-old">work
on
</del>
<ins class="diff-chg">not
be
used
for
further
technical
work.
However,
</ins>
the
<del class="diff-old">binding
mechanism
</del>
<ins class="diff-chg">contents
of
this
document
will
persist
in
other
ways
</ins>
in
the
<del class="diff-old">next
version
of
</del>
<ins class="diff-chg">future.
While
</ins>
the
<del class="diff-old">[
WOT-THING-DESCRIPTION
].
</del>
<ins class="diff-chg">individual
bindings
are
available
in
the
same
GitHub
repository,
the
main
document's
content
has
moved.
</ins>
Please
<ins class="diff-new">follow
the
links
below
to
find
the
relevant
information:
</ins></p><ul><li><ins class="diff-new">
If
you
are
interested
in
the
binding
mechanism,
please
</ins>
refer
to
the
<del class="diff-old">latest
Editor's
Draft
</del>
<a href="https://www.w3.org/TR/wot-thing-description-2.0/#bindings">
<ins class="diff-chg">Bindings
section
of
the
WoT
Thing
Description
document
</ins></a>.</li><li><ins class="diff-chg">
If
you
want
to
find
the
list
of
the
available
bindings,
they
will
be
located
in
the
</ins><a href="https://w3.org/TR/wot-binding-registry"><ins class="diff-chg">
WoT
Binding
Registry
</ins>
</a>
<del class="diff-old">for
future
work.
</del>
<ins class="diff-chg">.
Until
they
are
registered
in
the
registry,
they
are
listed
in
the
</ins><a href="https://github.com/w3c/wot-binding-templates#publications"><ins class="diff-chg">
Readme
</ins></a>.</li><li><ins class="diff-chg">
The
latest
version
of
this
document
before
its
retirement
is
available
as
a
</ins><a href="https://www.w3.org/TR/2024/NOTE-wot-binding-templates-20240528/"><ins class="diff-chg">
group
note
</ins></a>.</li></ul>
</div>
<p>
This
document
was
published
by
the
<a href="https://www.w3.org/groups/wg/wot">
Web
of
Things
Working
Group
</a>
as
a
Group
Note
using
the
<a href="https://www.w3.org/policies/process/20250818/#recs-and-notes">
Note
track
</a>.
</p>
<p>
This
Group
Note
is
endorsed
by
the
<a href="https://www.w3.org/groups/wg/wot">
Web
of
Things
Working
Group
</a>,
but
is
not
endorsed
by
<abbr title="World Wide Web Consortium">
W3C
</abbr>
itself
nor
its
Members.
</p>
<del class="diff-old">This
is
a
draft
document
and
may
be
updated,
replaced
or
obsoleted
by
other
documents
at
any
time.
It
is
inappropriate
to
cite
this
document
as
other
than
work
in
progress.
</del>
<p data-deliverer=95969>
The
<a href="https://www.w3.org/policies/patent-policy/">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Patent
Policy
</a>
does
not
carry
any
licensing
requirements
or
commitments
on
this
document.
</p>
<p>
This
document
is
governed
by
the
<del class="diff-old">03
November
2023
</del>
<a id=w3c_process_revision href="https://www.w3.org/policies/process/20250818/">
<ins class="diff-chg">18
August
2025
</ins>
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Process
Document
</a>.
</p>
</section>
<nav id=toc>
<h2 class=introductory id=table-of-contents>
Table
of
Contents
</h2>
<ol class=toc>
<li class=tocline>
<a class=tocxref href=#abstract>
Abstract
</a>
</li>
<li class=tocline>
<a class=tocxref href=#sotd>
Status
of
This
Document
</a>
</li>
<del class="diff-old">1.
Introduction
2.
Conformance
3.
Terminology
4.
Binding
Template
Mechanisms
4.1
Protocol
Binding
Templates
4.1.1
Subprotocols
4.1.2
Terms
Specified
by
Protocol
Binding
Templates
4.1.3
Existing
Protocol
Binding
Templates
4.1.4
Using
a
Thing
Description
with
a
Protocol
Binding
Template
Subspecification
4.1.5
Creating
a
new
Protocol
Binding
Template
Subspecification
4.2
Payload
Binding
Templates
4.2.1
Content
Types
4.2.2
Data
Schemas
4.2.3
Terms
Specified
by
Payload
Binding
Templates
4.2.4
Existing
Payload
Binding
Templates
4.2.5
Creating
a
new
Payload
Binding
Template
Subspecification
4.3
Platform
Binding
Templates
4.3.1
Existing
Platform
Binding
Templates
4.3.2
Creating
a
new
Platform
Binding
Template
Subspecification
5.
Examples
of
Thing
Descriptions
with
Protocol
Binding
Templates
6.
Security
and
Privacy
Considerations
A.
Examples
of
Payloads
and
Data
Schemas
from
IoT
Platforms
and
Standards
B.
Recent
Specification
Changes
B.1
Changes
from
the
Group
Note
28
September
2023
B.2
Changes
from
the
Group
Note
30
January
2020
B.3
Changes
from
the
Group
Note
5
April
2018
C.
Acknowledgements
D.
References
D.1
Normative
references
D.2
Informative
references
</del>
</ol>
</nav>
<del class="diff-old">1.
Introduction
IoT
addresses
multiple
use
cases
from
different
application
domains,
while
requiring
different
deployment
patterns
for
devices.
This
results
in
different
protocols
and
media
types,
creating
the
central
challenge
for
the
Web
of
Things:
enabling
interactions
with
the
plethora
of
different
IoT
platforms
and
devices
that
do
not
follow
any
particular
standard,
but
provide
an
eligible
interface
over
a
suitable
network
protocol.
WoT
is
addressing
this
challenge
through
Binding
Templates.
Binding
Templates
consist
of
multiple
specifications,
referred
to
as
a
subspecification
in
this
document,
that
enable
an
application
client
(a
WoT
Consumer
)
to
interact,
using
WoT
Thing
Description[
WOT-THING-DESCRIPTION
]
(TD),
with
Things
that
exhibit
diverse
protocols,
payload
formats
and
a
combination
of
these
in
platforms
and
frameworks.
The
mechanism
that
allows
Consumers
to
interact
with
a
variety
of
Things
is
called
the
Binding
Mechanism,
without
which
TDs
could
not
build
Hypermedia
Controls
as
explained
in
the
[
WOT-ARCHITECTURE
].
When
describing
a
particular
IoT
device
or
platform,
the
corresponding
Binding
Template
can
be
used
to
look
up
the
communication
metadata
that
is
to
be
provided
in
the
Thing
Description
to
support
that
platform.
Figure
1
shows
how
Binding
Templates
are
used.
Based
on
the
protocol,
media
type
or
platform
binding
template,
a
TD
is
created.
The
Consumer
that
is
processing
a
TD
implements
the
required
Binding
Template
that
is
present
in
the
TD
by
including
a
corresponding
protocol
stack,
media
type
encoder/decoder
or
platform
stack
and
by
configuring
the
stack
(or
its
messages)
according
to
the
information
given
in
the
TD
such
as
serialization
format
of
the
messages
and
header
options.
Figure
1
Platforms,
Protocols
and
Media
Types
as
building
blocks
for
binding
templates
and
TD
Each
Interaction
Affordance
in
a
TD
needs
to
have
a
binding
to
a
protocol
and
to
a
payload
format.
Figure
2
below
illustrates
an
excerpt
of
a
TD
of
a
robot
arm
with
of
HTTP
and
JSON
bindings.
Here,
the
Consumer
intends
to
invoke
an
action
of
the
robot
arm
(
goTo
)
in
order
to
move
it
to
the
position
x
equals
12
and
y
equals
100.
In
order
to
do
so,
it
creates
the
correct
payload,
serializes
it
and
sends
it
using
the
correct
protocol
options.
The
Thing
gets
the
message
over
the
network
and
responds
with
a
message
that
corresponds
to
its
TD.
Other
protocols,
payload
formats
or
their
combination
are
possible
and
are
explained
in
4.
Binding
Template
Mechanisms
.
Figure
2
</del>
<script>
<ins class="diff-chg">//
</ins><![CDATA[ <-- For SVG support if ('WebSocket' in window) { (function () { function refreshCSS() { var sheets = [].slice.call(document.getElementsByTagName("link")); var head = document.getElementsByTagName("head")[0]; for (var i = 0; i < sheets.length; ++i) { var elem = sheets[i]; var parent = elem.parentElement || head; parent.removeChild(elem); var rel = elem.rel; if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") { var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, ''); elem.href = url + (url.indexOf('?') ><ins class="diff-chg">
= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf()); } parent.appendChild(elem); } } var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://'; var address = protocol + window.location.host + window.location.pathname + '/ws'; var socket = new WebSocket(address); socket.onmessage = function (msg) { if (msg.data == 'reload') window.location.reload(); else if (msg.data == 'refreshcss') refreshCSS(); }; if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) { console.log('Live reload enabled.'); sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true); } })(); } else { console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.'); } // ]]> </script> <p role=navigation id=back-to-top>
</ins>
<del class="diff-old">Binding
Templates
Mechanism
inside
a
TD
excerpt
with
messages
of
its
Thing
and
a
Consumer.
Editor's
note
The
editors
also
recommend
reading
the
related
chapters
in
[
</del>
<a href=#title>
<del class="diff-old">WOT-ARCHITECTURE
</del>
<abbr title="Back to Top">
<ins class="diff-chg">â†‘
</ins></abbr>
<del class="diff-old">],
such
as
WoT
Binding
Templates
Building
Block
,
Hypermedia
Controls
,
Protocol
Bindings
</del>
</a>
<del class="diff-old">and
Media
Types
.
2.
Conformance
</del>
<del class="diff-old">As
well
as
sections
marked
as
non-normative,
all
authoring
guidelines,
diagrams,
examples,
and
notes
in
this
specification
are
non-normative.
Everything
</del>
</p> <script id=respec-highlight-vars> (() =>
<ins class="diff-chg">{
//
@ts-check
if
(document.respec)
{
document.respec.ready.then(setupVarHighlighter);
}
</ins>
else
<del class="diff-old">in
this
specification
is
normative.
The
key
words
MAY
,
MUST
,
SHOULD
,
and
SHOULD
NOT
in
this
document
are
to
be
interpreted
as
described
in
BCP
14
[
RFC2119
]
[
RFC8174
]
when,
and
only
when,
they
appear
in
all
capitals,
as
shown
here.
3.
Terminology
This
section
is
non-normative.
The
fundamental
WoT
terminology
such
as
Thing
,
Consumer
,
Thing
Description
(
TD
),
Interaction
Model
,
Interaction
Affordance
,
Property
,
Action
,
Event
,
Data
Schema
,
Content
Type
,
Protocol
Binding
,
Binding
Template
,
Servient
,
Vocabulary
,
WoT
Interface
,
WoT
Runtime
,
IoT
Platform
,
etc.
is
defined
in
Section
3
of
the
WoT
Architecture
specification
[
WOT-ARCHITECTURE
].
In
addition,
this
specification
introduces
the
following
definitions:
Binding
Template
Subspecification
,
subspecification
A
binding
template
document
that
is
published
separately
from
this
document
(called
the
core
document)
that
specifies
a
binding
template
for
a
protocol,
payload
format
or
platform.
All
binding
template
subspecifications
respect
the
rules
set
in
the
Core
Specification
.
Binding
Template
Core
Specification
,
Core
Specification
This
document.
All
binding
template
subspecifications
respect
the
rules
set
in
the
Core
Specification.
4.
Binding
Template
Mechanisms
TDs
can
be
bound
to
specific
protocols,
payload
formats
and
platforms.
This
is
possible
through
the
three
core
mechanisms
that
allow
WoT
to
be
used
in
various
domains
and
scenarios.
This
section
explains
how
these
binding
mechanism
types
are
structured,
should
be
specified,
and
links
to
corresponding
binding
documents
(subspecifications).
These
3
types
of
mechanisms
are:
Protocols
:
Application
layer
protocols
(e.g.,
HTTP[
RFC7231
],
CoAP[
RFC7252
],
MQTT[
MQTT
],
etc.)
whose
different
message
types
are
mapped
to
the
WoT
Thing
Description[
WOT-THING-DESCRIPTION
]
forms
via
reusable
vocabulary
and
extensions.
Payloads
:
Different
payload
formats
and
media
types
[
IANA-MEDIA-TYPES
]
which
can
be
represented
in
a
TD
via
Data
Schemas
or
forms.
Platforms
:
Platforms
and
frameworks
who
combine
the
use
of
protocols
and
payloads
in
a
certain
way,
which
can
be
represented
via
entire
Thing
Models
described
by
the
[
WOT-THING-DESCRIPTION
]
or
examples
of
TDs.
Each
Binding
Template
Subspecification
is
an
independent
document
that
has
a
separate
list
of
authors
and
publication
date.
This
document,
called
the
Binding
Template
Core
Specification
,
explains
the
binding
mechanism
by
giving
requirements
per
respective
binding
category
and
links
to
the
respective
subspecification.
These
can
be
found
in
sections
4.1
Protocol
Binding
Templates
,
4.2
Payload
Binding
Templates
and
4.3
Platform
Binding
Templates
.
Figure
3
Binding
Templates
Overview
and
the
Relationships
between
each
Document
Type
Each
Protocol
and
Payload
Binding
Template
is
specified
in
a
way
that
they
stay
independent
from
each
other.
This
means
that
each
document
can
be
read
independently
from
the
other
and
can
be
also
developed
independently.
However,
Platform
Binding
Templates
are
dependent
on
the
Protocol
and
Payload
Binding
Templates,
since
a
given
platform
uses
different
protocols
and
payload
formats
that
need
to
be
specified
first
in
their
respective
binding
templates
and
referred
to
within
a
Platform
Binding
Template.
4.1
Protocol
Binding
Templates
[
WOT-THING-DESCRIPTION
]
defines
abstract
operations
such
as
readproperty
,
invokeaction
and
subscribeevent
that
describe
the
intended
semantics
of
performing
the
operation
described
by
the
form
in
a
Thing
Description
.
In
order
for
the
operations
to
be
performed
on
the
affordance,
a
binding
of
the
operation
to
the
protocol
needs
to
happen.
In
other
words,
the
form
needs
to
contain
all
the
information
for
a
Consumer
to,
for
example
read
a
property,
with
the
protocol
in
the
form.
Most
protocols
have
a
relatively
small
set
of
methods
that
define
the
message
type,
the
semantic
intention
of
the
message.
REST
and
PubSub
architecture
patterns
result
in
different
protocols
with
different
methods.
Each
target
protocol
may
specify
different
method
names
for
similar
operations,
and
there
may
be
semantic
differences
between
similar
method
names
of
different
protocols.
Additionally,
Things
may
use
different
methods
for
performing
a
particular
WoT
operation.
For
example,
an
HTTP
POST
request
may
be
used
for
a
writeproperty
operation
in
one
Thing,
while
HTTP
PUT
may
be
used
in
another.
For
these
reasons,
Thing
Descriptions
require
the
ability
to
specify
which
method
to
use
per
operation.
Common
methods
found
in
REST
and
PubSub
protocols
are
GET,
PUT,
POST,
DELETE,
PUBLISH,
and
SUBSCRIBE.
Binding
Templates
describe
how
these
existing
methods
and
associated
vocabularies
can
be
used
in
a
Thing
Description
to
bind
to
the
WoT
operations.
This
is
done
by
defining
the
URI
scheme
of
the
protocol
and
mapping
the
protocol
methods
to
the
abstract
WoT
operations
such
as
readproperty
,
invokeaction
and
subscribeevent
.
In
some
cases,
additional
instructions
are
provided
to
explain
how
the
vocabulary
terms
should
be
used
in
different
cases
of
protocol
usage.
The
examples
below
show
the
binding
of
the
readproperty
operation
for
the
HTTP
and
Modbus
protocols.
Please
note
that
these
are
examples
and
please
always
refer
to
the
corresponding
binding
to
learn
about
the
relevant
vocabulary
terms
and
their
values.
Example
1
:
Binding
example
of
a
readproperty
operation
to
HTTP
                {
    ,
    ,
    
</del>
<ins class="diff-chg">{
setupVarHighlighter();
</ins>
}
<del class="diff-old">Example
2
:
Binding
example
of
a
readproperty
operation
to
Modbus
                {
    ,
    ,
    ,
    
</del>
<ins class="diff-chg">function
setupVarHighlighter()
{
document
.querySelectorAll("var")
.forEach(varElem
=>
varElem.addEventListener("click",
highlightListener));
</ins>
}
<del class="diff-old">The
form
elements
in
the
examples
above
convey
the
following
statements:
Left
Example:
To
do
a
readproperty
of
the
subject
Property
Affordance
by
performing
an
HTTP
GET
request
on
the
resource
props/temperature
to
the
host
at
example.com
on
port
80
(Port
80
is
assumed
as
per
[
RFC2616
]).
Right
Example:
To
do
a
readproperty
of
the
subject
Property
Affordance
using
the
readCoil
</del>
function
<del class="diff-old">of
Modbus
at
coil
1
of
the
device
with
the
127.0.0.1
address
at
its
port
60000
These
bindings
and
their
statements
are
possible
for
other
operations
and
protocols
as
well.
Below
are
examples
for
invokeaction
and
subscribeevent
:
Example
3
:
Binding
example
of
an
invokeaction
operation
to
HTTP
                {
    ,
    ,
    
</del>
<ins class="diff-chg">highlightListener(ev)
{
ev.stopPropagation();
const
{
target:
varElem
</ins>
}
<del class="diff-old">Example
4
:
Binding
example
of
a
subscribeevent
operation
to
MQTT
                {
    ,
    ,
    ,
    
</del>
<ins class="diff-chg">=
ev;
const
hightligtedElems
=
highlightVars(varElem);
const
resetListener
=
()
=>
{
const
hlColor
=
getHighlightColor(varElem);
hightligtedElems.forEach(el
=>
removeHighlight(el,
hlColor));
[...HL_COLORS.keys()].forEach(key
=>
HL_COLORS.set(key,
true));
};
if
(hightligtedElems.length)
{
document.body.addEventListener("click",
resetListener,
{
once:
true
});
</ins>
}
<del class="diff-old">The
form
elements
in
the
examples
above
convey
the
following
statements:
Left
Example:
To
do
an
invokeaction
of
the
subject
Action
Affordance
by
performing
an
HTTP
POST
request
on
the
resource
example/levelaction
to
the
host
at
192.168.1.32
on
port
8081
.
Right
Example:
To
do
a
subscribeevent
of
the
subject
Event
Affordance
by
connecting
to
the
MQTT
broker
at
iot.platform.com
and
port
8088
,
then
subscribing
to
the
topic
thing1/events/overheating
.
In
some
cases,
header
options
or
other
parameters
of
the
protocols
need
to
be
included.
Given
that
these
are
highly
protocol
dependent,
please
refer
to
the
bindings
listed
in
4.1.3
Existing
Protocol
Binding
Templates
.
Additionally,
protocols
may
have
defined
Subprotocols
that
can
be
used
for
some
interaction
types.
For
example,
to
receive
asynchronous
notifications
using
HTTP,
some
servers
may
support
long
polling
(
longpoll
),
WebSub
[
WebSub
]
(
websub
)
and
Server-Sent
Events
[
eventsource
]
(
sse
).
4.1.1
Subprotocols
As
defined
in
[
WOT-ARCHITECTURE
],
a
subprotocol
is
an
extension
mechanism
to
a
protocol.
A
subprotocol
can
require
a
sequence
of
protocol
messages
or
a
specific
structure
of
message
payloads,
which
can
have
its
own
semantics
within
that
subprotocol.
The
use
of
a
subprotocol
is
expressed
with
the
subprotocol
field,
as
defined
in
[
WOT-THING-DESCRIPTION
].
It
can
be
used
in
a
form
instance
to
indicate
the
use
of
one
of
these
protocols,
for
example
long
polling
with
its
special
use
of
HTTP:
Example
5
:
Subprotocol
usage
for
subscribing
events
          {
    ,
    ,
    
</del>
}
<del class="diff-old">The
values
that
the
subprotocol
term
can
take
is
not
constrained
by
the
[
WOT-THING-DESCRIPTION
]
since
different
protocols
can
have
different
subprotocols.
Correspondingly,
subprotocols
are
linked
to
the
protocol
they
are
extending
and
should
be
understood
together
with
the
protocol
indicated
in
href
of
the
forms
(or
the
base
).
For
WebSockets,
the
IANA-registered
Websocket
Subprotocols
[
iana-web-socket-registry
]
may
be
used.
For
CoAP,
"subprotocol":"cov:observe"
can
be
used
to
describe
asynchronous
observation
operations
as
defined
by
[
RFC6741
].
The
subprotocols
can
be
defined
and
explained
as
a
part
of
a
protocol
or
platform
binding
subspecification.
4.1.2
Terms
Specified
by
Protocol
Binding
Templates
Overall,
a
protocol
binding
template
specifies
the
values
and
structure
of
certain
vocabulary
terms
in
a
TD.
The
table
below
lists
the
vocabulary
term,
the
class
it
belongs
to
and
whether
the
subspecification
is
required
to
specify
the
values
the
term
can
take.
In
addition
to
these,
additional
terms
for
describing
protocol
options
are
typically
added.
Table
1
Terms
specified
by
Protocol
Binding
Templates
Vocabulary
Term
Class
Specification
Requirement
@context
Thing
mandatory
href
Form
mandatory
subprotocol
Form
optional
contentType
Form
optional
contentType
ExpectedResponse
optional
contentType
AdditionalExpectedResponse
optional
contentCoding
Form
optional
4.1.3
Existing
Protocol
Binding
Templates
The
table
below
summarizes
the
currently
specified
protocols
in
their
respective
Binding
Template
Subspecification
.
Table
2
Existing
Protocol
Binding
Templates
Abbreviation
Name
Link
to
Binding
Template
Link
to
Ontology
HTTP
Hypertext
Transfer
Protocol
Binding
Template
Ontology
CoAP
Constrained
Application
Protocol
Binding
Template
Ontology
MQTT
Message
Queuing
Telemetry
Transport
Binding
Template
Ontology
Modbus
Modbus
Binding
Template
Ontology
BACnet
Building
Automation
and
Control
Networks
Binding
Template
Ontology
4.1.4
Using
a
Thing
Description
with
a
Protocol
Binding
Template
Subspecification
Protocol
Binding
Templates
contain
vocabularies
that
extend
the
vocabulary
found
in
the
[
WOT-THING-DESCRIPTION
].
This
means
that
the
way
a
TD
is
consumed
and
how
the
interactions
happen
with
the
Thing
are
adapted
to
such
vocabularies.
The
steps
below
explain
how
this
process
typically
looks
like.
Detect
the
protocol:
Upon
the
activation
</del>
<ins class="diff-chg">//
availability
</ins>
of
<del class="diff-old">a
form
to
execute
the
operation,
the
Consumer
SHOULD
look
at
the
href
member
and
the
base
(if
exists)
and
identify
the
protocol.
Choose
the
correct
protocol
stack:
The
Consumer
SHOULD
use
choose
the
correct
protocol
</del>
<ins class="diff-chg">highlight
colors.
colors
</ins>
from
<del class="diff-old">its
protocol
software
stacks.
Validate
the
forms
part
of
the
TD
:
Using
the
JSON
Schema
instances
provided
in
the
respective
subspecification
or
through
programmatically
checking
key
value
pairs,
the
Consumer
MAY
validate
the
respective
form
terms
in
order
to
verify
they
are
correctly
specified
in
the
TD
instance.
Start
communication:
The
Consumer
SHOULD
send
requests
for
the
chosen
operation
as
specified
by
the
form
and
additional
behavior
that
is
expected.
These
are
specified
using
the
different
form
terms
such
as
subprotocol
or
other
vocabulary
terms
introduced
by
the
protocol
binding.
The
interaction
affordance
data
exchanged
with
the
Thing
SHOULD
be
according
to
the
Data
Schema
and
Content
Type
present
in
the
TD.
The
corresponding
Data
Schema
to
the
operation
can
be
found
in
the
[
WOT-THING-DESCRIPTION
],
table
called
Mapping
op
Values
to
Data
Schemas
.
4.1.5
Creating
a
new
Protocol
Binding
Template
Subspecification
When
creating
a
new
protocol
binding
template
subspecification
,
e.g.
based
on
a
</del>
<ins class="diff-chg">var.css
const
HL_COLORS
=
</ins>
new
<del class="diff-old">communication
protocol,
the
proposed
document
should
enable
implementations
of
this
binding
in
an
interoperable
way
for
Consumer
and
Producer
implementations.
More
specifically,
each
Binding
Template
Subspecification
MUST
specify
the
following:
URI
Scheme:
For
identification
of
the
used
protocol,
a
standardized
URI
scheme
[
RFC3986
]
</del>
<ins class="diff-chg">Map([
["respec-hl-c1",
true],
["respec-hl-c2",
true],
["respec-hl-c3",
true],
["respec-hl-c4",
true],
["respec-hl-c5",
true],
["respec-hl-c6",
true],
["respec-hl-c7",
true],
]);
function
getHighlightColor(target)
{
//
return
current
colors
if
applicable
const
{
</ins>
value
<del class="diff-old">MUST
be
declared
in
the
form
of
a
string.
This
URI
Scheme
is
used
in
TDs
at
top
level
base
or
in
the
href
term
of
the
forms
container.
These
can
be
officially
registered
ones
at
IANA
[
iana-uri-schemes
]
(e.g.
"https://"
,
"coap://"
)
or
they
can
be
declared
in
the
protocol
subspecification
(e.g.
"mqtt://"
,
"modbus+tcp://"
).
How
the
full
URI
can
be
constructed
for
different
affordances
(or
resources)
MUST
be
specified
as
well.
@context
Usage
and
Ontology:
A
vocabulary
that
allows
adding
protocol
options
to
a
Thing
Description
forms
SHOULD
be
provided
to
allow
semantic
annotations
of
the
operations
with
protocol
specific
information.
The
prefix
and
IRI
to
be
used
in
the
@context
in
order
to
link
to
the
vocabulary
of
the
protocol
SHOULD
be
also
provided.
The
prefix
SHOULD
use
the
v
suffix
notation
in
order
to
avoid
confusion
with
the
URI
scheme
of
the
protocol
(e.g.
htv
for
HTTP
and
mqv
for
MQTT).
For
instructions
on
how
to
create
a
vocabulary,
please
refer
to
our
Vocabulary
Creation
Guide
.
Mapping
to
WoT
Operations:
Most
protocols
have
a
set
of
methods
or
verbs
that
adds
a
meaning
to
the
messages
of
the
protocol.
A
protocol
binding
template
MUST
be
able
to
map
WoT
operation
types
(
readproperty
,
invokeaction
,
etc.)
to
concrete
protocol
message
types
or
methods.
When
specifying
the
mapping,
the
mapping
SHOULD
be
bidirectional,
i.e.
it
should
be
clear
how
to
do
a
readproperty
operation
with
the
given
protocol
and
how
an
existing
implementation's
endpoints
can
be
mapped
to
a
WoT
operation
should
be
also
clear.
JSON
Schema:
A
JSON
Schema
to
validate
the
forms
of
a
TD
using
the
Protocol
Binding
SHOULD
be
provided.
This
allows
validation
of
the
URI
scheme
and
the
vocabulary
terms.
The
JSON
Schema
instance
SHOULD
follow
the
template
provided
in
the
Binding
Templates
GitHub
Repository.
Specification:
The
official
specification
document
of
the
protocol
SHOULD
be
provided.
This
SHOULD
be
a
static
version,
i.e.
the
exact
document
used
during
the
writing
of
the
binding
that
is
guaranteed
to
not
change.
If
this
is
not
possible,
the
specification
should
be
marked
with
a
date
of
access.
When
the
specification
is
not
publicly
available
and
cannot
be
linked
with
a
static
version,
an
editor's
note
should
be
provided
in
the
introduction,
explaining
how
to
</del>
<ins class="diff-chg">}
=
target.classList;
const
re
=
/respec-hl-\w+/;
const
activeClass
=
re.test(value)
&&
value.match(re);
if
(activeClass)
return
activeClass[0];
//
first
color
preference
if
(HL_COLORS.get("respec-hl-c1")
===
true)
return
"respec-hl-c1";
//
otherwise
</ins>
get
<del class="diff-old">access
to
the
specification.
A
template
is
also
provided
for
new
protocol
binding
template
specifications
at
the
GitHub
Repository.
4.2
Payload
Binding
Templates
[
WOT-THING-DESCRIPTION
]
defines
two
mechanisms
to
describe
how
a
payload
of
a
message
over
any
protocol
can
look
like.
Firstly,
media
types
[
IANA-MEDIA-TYPES
]
describe
the
serialization
used
for
sending
and
receiving
the
data
with
a
protocol.
They
are
represented
within
the
contentType
in
the
Forms
of
a
TD,
which
is
mandatory
for
each
Interaction
Affordance.
Secondly,
it
defines
the
Data
Schema
concept
to
describe
the
structure
of
the
messages,
which
are
used
together
with
media
types.
The
combination
of
the
two
allows
any
message
to
be
described
in
a
TD,
allowing
correct
serialization
and
deserialization
of
the
messages
by
the
Thing
and
Consumers.
In
the
rest
of
this
section
at
4.2.1
Content
Types
and
4.2.2
Data
Schemas
,
you
can
find
examples
of
how
payload
bindings
can
look
like.
At
4.2.4
Existing
Payload
Binding
Templates
you
can
find
the
current
payload
binding
templates
and
4.2.5
Creating
a
new
Payload
Binding
Template
Subspecification
explains
how
new
payload
binding
templates
can
be
created.
4.2.1
Content
Types
Content
type
includes
the
media
type
and
potential
parameters
for
the
media
type
and
it
enables
proper
processing
of
the
serialized
documents.
This
way,
the
messages
can
be
exchanged
in
any
format
and
allow
the
upper
layers
of
an
application
to
adapt
to
different
formats.
In
</del>
some
<del class="diff-old">cases
such
as
images,
videos
or
any
unstructured
data,
content
type
is
enough
to
describe
the
payload
but
in
cases
like
JSON
([
RFC8259
])
a
Data
Schema
is
usually
provided,
like
explained
in
4.2.2
Data
Schemas
.
For
example,
a
number
payload
can
be
serialized
as
JSON
or
XML
and
be
indicated
in
the
contentType
of
the
forms
with
application/json
or
application/xml
,
respectively.
Further
parametrization
is
possible
via
the
plus
(
+
)
or
the
semicolon
(
;
)
notations.
In
the
example
below,
you
can
find
the
form
elements
with
content
types
for
JSON
and
plain
text
with
additional
parameters.
In
this
specific
case,
the
forms
describe
that
reading
this
property
with
http
or
coap
result
in
different
content
types.
For
structured
media
types,
a
Data
Schema
is
generally
provided
in
the
affordance
level
as
explained
in
4.2.2
Data
Schemas
and
in
the
Data
Schema
section
of
the
TD
specification
.
However,
for
unstructured
data
such
as
images
and
videos,
a
Data
Schema
is
typically
not
available.
Example
6
:
JSON
and
CBOR
media
types
in
forms
          {
    :[
    {
        ,
        ,
        
    },
    {
        ,
        ,
        
    }]
}
Other
content
types
can
be
also
expressed
in
TDs.
In
the
list
below,
examples
of
different
content
type
variations
can
be
found.
These
content
types
can
replace
the
ones
in
Example
6
.
Structured
Content
Types
without
Parametrization
application/json
:
JSON
[
RFC8259
]
application/xml
:
XML
[
RFC5364
]
application/cbor
:
CBOR
[
RFC8949
]
text/csv
:
CSV
[
RFC4180
]
Structured
Content
Types
with
Parametrization
application/senml+json
:
SenML
Data
serialized
in
JSON
[
RFC8259
]
application/senml+xml
:
SenML
Data
serialized
as
XML
application/ocf+cbor
:
OCF
payload
serialized
in
CBOR
text/csv;charset=utf-8
:
CSV
encoded
in
UTF-8
[
RFC4180
]
Unstructured
Content
Types
image/jpeg
:
JPEG
image
video/mp4
:
MP4
Video
application/octet-stream
:
Generic
binary
stream
4.2.2
Data
Schemas
Data
Schema,
as
explained
in
[
WOT-THING-DESCRIPTION
],
describes
the
structure
of
the
messages,
which
are
used
together
with
media
types.
Even
though
it
is
largely
inspired
by
JSON
Schema
[
json-schema
],
it
can
be
used
for
describing
</del>
other
<del class="diff-old">payload
types
such
as
[
XML
],
string-encoded
images,
bit
representations
of
integers,
etc.
Data
Schema
SHOULD
be
used
in
addition
to
the
media
types.
Depending
on
the
case,
the
structure
of
the
messages
can
be
anything
from
a
simple
number
to
arrays
or
objects
with
multiple
levels
of
nesting.
Existing
IoT
Platforms
and
Standards
have
certain
payload
formats
with
variations
on
how
the
data
is
structured.
As
explained
in
[
WOT-THING-DESCRIPTION
],
Data
Schema
can
be
used
in
a
TD
in
one
of
the
following
places:
Property
Affordances:
Each
property
affordance
can
contain
terms
for
Data
Schema
and
describe
the
property
values
when
read,
observed
or
written
to.
Action
Affordances:
input
and
output
vocabulary
terms
are
used
to
provide
two
different
schemas
when
data
is
exchanged
in
both
directions,
such
as
in
the
case
of
invoking
an
Action
Affordance
with
input
parameters
and
receiving
status
information.
Event
Affordances:
data
,
dataResponse
,
subscription
and
cancellation
are
used
to
describe
the
payload
when
the
event
data
is
delivered
by
the
Exposed
Thing,
the
payload
to
reply
with
for
event
deliveries,
the
payload
needed
to
subscribe
to
the
event
and
the
payload
needed
to
cancel
receiving
event
data
from
the
Exposed
Thing,
respectively.
URI
Variables:
In
the
Thing
or
Affordance
level,
uriVariables
can
describe
the
data
that
needs
to
be
supplied
inside
the
request
URI
as
a
string.
Below
is
an
example
of
a
simple
JSON
object
payload
with
the
corresponding
Data
Schema.
Examples
from
various
IoT
Platforms
and
Standards
can
be
found
in
A.
Examples
</del>
<ins class="diff-chg">available
color
return
[...HL_COLORS.keys()].find(c
=>
HL_COLORS.get(c))
||
"respec-hl-c1";
}
function
highlightVars(varElem)
{
const
textContent
=
norm(varElem.textContent);
const
parent
=
varElem.closest(".algorithm,
section");
const
highlightColor
=
getHighlightColor(varElem);
const
varsToHighlight
=
[...parent.querySelectorAll("var")].filter(
el
=>
norm(el.textContent)
===
textContent
&&
el.closest(".algorithm,
section")
===
parent
);
//
update
availability
</ins>
of
<del class="diff-old">Payloads
and
Data
Schemas
from
IoT
Platforms
and
Standards
.
Example
7
:
Simple
JSON
Object
Payload
                  {
    ,
    
</del>
<ins class="diff-chg">highlight
color
const
colorStatus
=
varsToHighlight[0].classList.contains("respec-hl");
HL_COLORS.set(highlightColor,
colorStatus);
//
highlight
vars
if
(colorStatus)
{
varsToHighlight.forEach(el
=>
removeHighlight(el,
highlightColor));
return
[];
</ins>
}
<del class="diff-old">Example
8
:
DataSchema
for
Simple
JSON
Object
Payload
                  {
    ,
    : {
        : {
            ,
            ,
            
        },
        : {
            ,
            ,
            
        }
    }
</del>
<ins class="diff-chg">else
{
varsToHighlight.forEach(el
=>
addHighlight(el,
highlightColor));
</ins>
}
<del class="diff-old">4.2.3
Terms
Specified
by
Payload
Binding
Templates
Overall,
a
payload
binding
template
specifies
the
values
and
structure
of
certain
vocabulary
terms
in
a
TD.
The
table
below
lists
the
vocabulary
term,
the
</del>
<ins class="diff-chg">return
varsToHighlight;
}
function
removeHighlight(el,
highlightColor)
{
el.classList.remove("respec-hl",
highlightColor);
//
clean
up
empty
</ins>
class
<del class="diff-old">it
belongs
to
and
whether
the
subspecification
is
required
to
specify
the
values
the
term
can
take.
In
addition
to
these,
additional
vocabulary
terms
can
be
added
and
restrictions
to
Data
Schema
terms
can
be
placed.
Table
3
Terms
specified
by
Payload
Binding
Templates
Term
Class
Specification
Requirement
contentType
Form
mandatory
contentType
ExpectedResponse
optional
contentType
AdditionalExpectedResponse
optional
contentCoding
Form
optional
4.2.4
Existing
Payload
Binding
Templates
The
table
below
summarizes
the
currently
specified
payload
binding
templates.
Table
4
Existing
Platform
Binding
Templates
Abbreviation
Name
Media
Type
Link
JSON
JavaScript
Object
Notation
application/json
Planned
XML
eXtensible
Markup
Language
application/xml
Link
(Work
in
Progress)
text
text
text/plain
Planned
Unstructured
Data
Unstructured
Data
various
Planned
4.2.5
Creating
a
new
Payload
Binding
Template
Subspecification
Each
payload
binding
template
subspecification
,
SHOULD
contain
the
respective
media
type.
Ideally
this
media
type
has
been
registered
at
the
IANA
registry
[
IANA-MEDIA-TYPES
]
with
a
corresponding
mime
type
(e.g.
application/json
).
If
it
is
not
registered,
the
binding
document
can
propose
a
mime
type.
Additionally,
how
that
media
type
is
represented
in
a
Data
Schema
SHOULD
be
demonstrated
with
examples.
In
all
cases,
the
following
information
SHOULD
be
provided:
Specification:
The
official
specification
document
of
the
payload
format
SHOULD
be
provided.
This
SHOULD
be
a
static
version,
i.e.
the
exact
document
used
during
the
writing
of
the
binding
that
is
guaranteed
to
not
change.
If
this
is
not
possible,
the
specification
should
be
marked
with
a
date
of
access.
When
the
specification
is
not
publicly
available
and
cannot
be
linked
with
a
static
version,
an
editor's
note
should
be
provided
in
the
introduction,
explaining
how
to
get
access
to
the
specification.
4.3
Platform
Binding
Templates
There
are
already
various
IoT
platforms
on
the
market
that
allows
exposing
physical
and
virtual
Things
to
the
Internet.
These
platforms
generally
require
a
certain
use
of
a
protocol
and
payload.
Thus,
they
can
be
seen
as
a
combination
of
the
4.1
Protocol
Binding
Templates
and
4.2
Payload
Binding
Templates
.
In
these
cases,
the
use
of
protocol
and
payload
bindings
needs
to
be
supported
with
how
they
are
related
to
each
other
in
the
specific
platform.
For
example,
Things
of
a
certain
platform
can
require
the
usage
of
HTTP
and
Websockets
together
with
certain
JSON
payload
structures.
Thus,
Platform
Binding
subspecification
s
provide
Thing
Models
and
examples
of
TDs
that
allow
to
semantically
group
multiple
binding
templates.
This
allows
creation
of
TDs
for
these
platforms
in
a
consistent
manner
and
makes
it
easier
to
develop
Consumer
s
for
them.
Since
Platform
Binding
Templates
combine
the
usage
of
protocol
and
payload
binding
templates,
the
vocabulary
terms
and
values
</del>
<ins class="diff-chg">attributes
so
</ins>
they
<del class="diff-old">can
specify
are
the
combination
of
vocabulary
terms
in
Table
1
and
Table
3
.
Similarly,
a
Platform
Binding
subspecification
SHOULD
NOT
introduce
new
protocol
binding
templates
or
media
types
inside
its
own
document.
If
a
Platform
Binding
subspecification
requires
the
usage
of
protocol
or
media
type,
corresponding
protocol
or
payload
binding
templates
MUST
be
created
first.
4.3.1
Existing
Platform
Binding
Templates
The
table
below
summarizes
the
currently
specified
platform
binding
template
subspecification
s.
Name
Link
Philips
Hue
Planned
ECHONET
Planned
OPC-UA
Planned
4.3.2
Creating
a
new
Platform
Binding
Template
Subspecification
Depending
on
the
platform
and
the
variety
of
devices
it
proposes,
each
platform
binding
template
subspecification
will
be
structured
differently.
When
the
platforms
offer
a
reasonable
set
of
device
types,
a
Thing
Model
for
each
device
type
SHOULD
be
provided.
In
other
cases,
possible
devices
SHOULD
be
generalized
by
providing
a
set
of
example
Thing
Models
or
TDs.
In
all
cases,
the
following
information
SHOULD
be
provided:
Protocol:
The
protocol
used
by
the
platform
SHOULD
be
specified
and
linked
to
a
protocol
binding
template
subspecification
when
a
corresponding
one
exists.
Media
Type:
The
media
type
used
by
the
platform
SHOULD
be
specified
and
linked
to
a
payload
binding
template
subspecification
when
a
corresponding
one
exists.
API
Documentation:
A
static
link
pointing
to
the
used
API
Documentation
or
Specification
of
the
platform
SHOULD
be
provided.
When
the
documentation
is
not
publicly
available
and
cannot
be
included
in
a
static
version
in
the
respective
folder,
an
editor's
note
should
be
provided
in
the
introduction,
explaining
how
to
get
access
to
the
documentation.
5.
Examples
of
Thing
Descriptions
with
Protocol
Binding
Templates
This
section
is
non-normative.
The
following
TD
examples
uses
HTTP,
CoAP
and
MQTT
Protocol
Binding
Templates.
These
TDs
have
Context
Extensions
which
assume
that
there
is
a
CoAP
and
MQTT
</del>
<ins class="diff-chg">don't
come
</ins>
in
<del class="diff-old">RDF
vocabulary
similar
to
[
HTTP-in-RDF10
]
that
is
accessible
via
the
namespaces
http://www.example.org/coap-binding#
and
http://www.example.org/mqtt-binding#
,
respectively.
Please
note
that
the
TD
context
at
"https://www.w3.org/2019/wot/td/v1"
already
includes
the
[
HTTP-in-RDF10
],
so
HTTP
context
extensions
can
be
directly
used
and
make
sure
to
look
at
the
Binding
Template
subspecifications
to
find
the
most
up-to-date
vocabulary
terms
and
examples.
The
context
extensions
we
see
below
have
the
following
instructions
to
the
TD
Consumer:
"htv:methodName"
member
instructs
the
Consumer
which
HTTP
method
has
to
be
applied
(e.g.,
"GET"
for
retrieving
a
resource
or
"POST"
for
sending
data
to
a
resource).
"cov:method"
member
instructs
the
Consumer
which
CoAP
method
has
to
be
applied
(e.g.,
"GET"
for
the
CoAP
Method
Code
0.01,
"POST"
for
the
CoAP
Method
Code
0.02,
or
iPATCH
for
CoAP
Method
Code
0.07).
"mqv:controlPacket"
member
instructs
the
Consumer
which
MQTT
command
has
to
be
applied
(e.g.,
"subscribe"
for
the
subscribing
to
a
topic
and
"unsubscribe"
for
unsubscribing).
First,
a
TD
with
multiple
protocols
is
introduced
where
each
interaction
affordance
has
one
form
with
one
protocol.
Example
9
:
TD
with
one
protocol
per
form
      {
    : [
        ,
        {
            ,
            
        }
    ],
    ,
    ,
    : {
        : {
            
        }
    },
    ],
    : {
        : {
            ,
            ,
            ,
            : [
                {
                    ,
                    ,
                    ,
                    
                }
            ]
        },
        : {
            ,
            ,
            ,
            : [
                {
                    ,
                    ,
                    ,
                    
                }
            ]
        }
    },
    : {
        : {
            :  {
                
            },
            : [
                {
                    ,
                    ,
                    ,
                    
                }
            ]
        },
        : {
            :  {
                ,
                
            },
            : [
                {
                    ,
                    ,
                    ,
                    
                }
            ]
        }
    },
    :{
        : {
            ,
            :{
                ,
                ,
                
            },
            : [
                {
                    ,
                    ,
                    ,
                    ,
                    
                }
            ]
        }
    }
</del>
<ins class="diff-chg">export
if
(!el.classList.length)
el.removeAttribute("class");
</ins>
}
<del class="diff-old">Another
version
of
the
previous
TD
with
multiple
protocol
options
per
form
is
shown
below.
Notably,
the
brightness
property
can
be
read
via
HTTP
and
CoAP,
and
observed
via
MQTT;
concentration
event
can
be
subscribed
to
via
CoAP
and
MQTT.
In
this
case,
the
Consumer
would
pick
the
form
it
can
support
based
on
its
internal
implementation,
e.g.
whether
it
has
CoAP
protocol
stack
or
not.
Example
10
:
TD
with
protocol
options
and
complex
payload
      {
    : [
        ,
        {
            ,
            
        }
    ],
    ,
    ,
    : {
        : {
            
        }
    },
    ],
    : {
        : {
            ,
            ,
            ,
            : [
                {
                    ,
                    ,
                    ,
                    
                },
                {
                    ,
                    ,
                    ,
                    
                }
            ]
        },
        : {
            ,
            ,
            ,
            : [
                {
                    ,
                    ,
                    ,
                    
                },
                {
                    ,
                    ,
                    ,
                    
                },
                {
                    ,
                    ,
                    ,
                    
                }
            ]
        }
    },
    : {
        : {
            :  {
                
            },
            : [
                {
                    ,
                    ,
                    ,
                    
                }
            ]
        },
        : {
            :  {
                ,
                
            },
            : [
                {
                    ,
                    ,
                    ,
                    
                }
            ]
        }
    },
    :{
        : {
            ,
            :{
                ,
                ,
                
            },
            : [
                {
                    ,
                    ,
                    ,
                    ,
                    
                },
                {
                    ,
                    ,
                    ,
                    ,
                    
                }
            ]
        }
    }
</del>
<ins class="diff-chg">function
addHighlight(elem,
highlightColor)
{
elem.classList.add("respec-hl",
highlightColor);
</ins>
}
<del class="diff-old">6.
Security
and
Privacy
Considerations
Editor's
note
Security
and
privacy
considerations
are
still
under
discussion
and
development;
the
content
below
should
be
considered
preliminary.
Due
to
the
complexity
of
the
subject
we
are
considering
producing
a
separate
document
containing
a
detailed
security
and
privacy
considerations
discussion
including
a
risk
analysis,
threat
model,
recommended
mitigations,
and
appropriate
references
to
best
practices.
A
summary
will
be
included
here.
Work
in
progress
is
located
in
the
WoT
Security
and
Privacy
repository.
Please
file
any
security
or
privacy
considerations
and/or
concerns
using
the
GitHub
Issue
feature.
Security
is
a
cross-cutting
issue
that
needs
to
be
taken
into
account
in
all
WoT
building
blocks.
The
W3C
WoT
does
not
define
any
new
security
mechanisms,
but
provides
guidelines
to
apply
the
best
practices
</del>
<ins class="diff-chg">/**
*
Same
as
`norm`
</ins>
from
<del class="diff-old">Web
security,
IoT
security,
and
information
security
for
general
software
and
hardware
considerations.
The
WoT
Thing
Description
must
be
used
together
with
integrity
protection
mechanisms
and
access
control
policies.
Users
must
ensure
that
no
sensitive
information
is
included
in
the
TDs
themselves.
The
WoT
Binding
Templates
must
correctly
cover
the
security
mechanisms
employed
by
the
underlying
IoT
platform
.
Due
to
the
automation
of
network
interactions
necessary
in
the
IoT,
operators
need
to
ensure
that
Things
are
exposed
and
consumed
in
a
way
that
is
compliant
with
their
security
policies.
The
WoT
Runtime
implementation
for
the
WoT
Scripting
API
must
have
mechanisms
to
prevent
malicious
access
to
the
system
and
isolate
scripts
</del>
<ins class="diff-chg">src/core/utils,
but
our
build
process
doesn't
allow
*
imports
</ins>
in
<del class="diff-old">multi-tenant
Servients
.
A.
Examples
of
Payloads
and
Data
Schemas
from
IoT
Platforms
and
Standards
As
an
extension
of
4.2.2
Data
Schemas
,
this
section
collects
examples
of
different
payloads
and
their
corresponding
DataSchema
.
These
are
from
well-known
IoT
Platforms
and
Standards
and
aim
to
illustrate
the
various
ways
a
payload
can
look
like
and
how
one
can
describe
it
with
a
Data
Schema.
SenML
[
RFC8428
]
might
use
the
following
construct:
Example
11
:
SenML
Payload
Example
              [
    {
        
    },
    {
        ,
        
    },
    {
        ,
        
    }
]
Example
12
:
Data
Schema
for
SenML
Payload
Example
              {
    ,
    : [
    {
        ,
        : {
            : {
                ,
                
            }
        }
    },
    {
        ,
        : {
            : {
                ,
                
            },
            : {
                ],
                ,
                ,
                
            }
        }
    },
    {
        ,
        : {
            : {
                ,
                
            },
            : {
                ],
                ,
                ,
                
            }
        }
    }
    ]
}
A
Batch
Collection
according
to
OCF[
OCF
]
may
be
structured
like
this:
Example
13
:
OCF
Batch
Example
              [
{
    ,
    : {
    
    }
},
</del>
<ins class="diff-chg">runtime
scripts,
so
duplicated
here.
*
@param
{string}
str
*/
function
norm(str)
</ins>
{
<del class="diff-old">    ,
    : {
    
    }
}
]
Example
14
:
Data
Schema
for
OCF
Batch
Payload
Example
              {
,
: [
    {
    ,
    : {
        : {
        ,
        
        },
        : {
        ,
        : {
            : {
            ],
            ,
            ,
            
            }
        }
        }
    }
    },
    {
    ,
    : {
        : {
        ,
        
        },
        : {
        ,
        : {
            : {
            ],
            ,
            ,
            
            }
        }
        }
    }
    }
]
}
And
an
IPSO
Smart
Object
on
LWM2M
[
LWM2M
]
might
look
like
the
following:
Example
15
:
IPSO/LWM2M
Payload
Example
              {
,
: [
    {
    ,
    
    },
    {
    ,
    
    }
]
}
Example
16
:
Data
Schema
for
IPSO/LWM2M
Payload
Example
              {
,
: {
    : {
    ,
    
    },
    : {
    ,
    : [
        {
        ,
        : {
            : {
            ,
            
            },
            : {
            ],
            ,
            ,
            
            }
        }
        },
        {
        ,
        : {
            : {
            ,
            
            },
            : {
            ],
            ,
            ,
            
            }
        }
        }
    ]
    }
}
</del>
<ins class="diff-chg">return
str.trim().replace(/\s+/g,
"
");
</ins>
}
<del class="diff-old">B.
Recent
Specification
Changes
B.1
Changes
from
the
Group
Note
28
September
2023
Adjusted
Figure
1
to
not
mention
commercial
products
Added
BACnet
Binding
Template
to
the
list
of
Protocol
Binding
Templates
in
Table
2
Removed
unnecessary
heading
hierarchies
Added
mention
that
the
work
continues
in
the
WoT
Thing
Description
document
B.2
Changes
from
the
Group
Note
30
January
2020
Separated
Binding
concepts
to
separate
sections
Created
individual
documents
for
each
binding
Clarified
the
binding
mechanism
and
separated
the
examples
from
the
mechanism
Aligned
with
the
WoT
Thing
Description
1.1
stable
information
model
B.3
Changes
from
the
Group
Note
5
April
2018
Restructured
the
document
Aligned
with
the
recent
TD
specification
changes
Aligned
with
the
WoT
Thing
Description
1.1
stable
information
model
Added
default
vocabulary
terms
C.
Acknowledgements
Special
thanks
to
all
active
participants
of
the
W3C
Web
of
Things
Interest
Group
and
Working
Group
for
their
technical
input
and
suggestions
that
led
to
improvements
to
this
document.
//
</del>
<ins class="diff-chg">})()
</ins>
</script>
<del class="diff-old">D.
References
D.1
Normative
references
[eventsource]
Server-Sent
Events
.
Ian
Hickson.
W3C.
28
January
2021.
W3C
Recommendation.
URL:
https://www.w3.org/TR/eventsource/
[IANA-MEDIA-TYPES]
Media
Types
.
IANA.
URL:
https://www.iana.org/assignments/media-types/
[iana-uri-schemes]
Uniform
Resource
Identifier
(URI)
Schemes
.
IANA.
21
July
2021.
URL:
https://www.iana.org/assignments/uri-schemes/uri-schemes.xhtml
[iana-web-socket-registry]
IANA
Registry
for
Websocket
Subprotocols
.
IANA.
24
May
2019.
URL:
https://www.iana.org/assignments/websocket/websocket.xml#subprotocol-name
[json-schema]
JSON
Schema:
A
Media
Type
for
Describing
JSON
Documents
.
Austin
Wright;
Henry
Andrews;
Ben
Hutton;
Greg
Dennis.
Internet
Engineering
Task
Force
(IETF).
8
December
2020.
Internet-Draft.
URL:
https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema
[LWM2M]
Lightweight
M2M
.
Open
Mobility
Alliance.
URL:
https://www.omaspecworks.org/what-is-oma-specworks/iot/lightweight-m2m-lwm2m/
[OCF]
OCF
Specification
.
Open
Connectivity
Foundation.
Last
accessed:
February
2020.
URL:
https://openconnectivity.org/developer/specifications/
[RFC2119]
Key
words
for
use
in
RFCs
to
Indicate
Requirement
Levels
.
S.
Bradner.
IETF.
March
1997.
Best
Current
Practice.
URL:
https://www.rfc-editor.org/rfc/rfc2119
[RFC2616]
Hypertext
Transfer
Protocol
--
HTTP/1.1
.
R.
Fielding;
J.
Gettys;
J.
Mogul;
H.
Frystyk;
L.
Masinter;
P.
Leach;
T.
Berners-Lee.
IETF.
June
1999.
Draft
Standard.
URL:
https://www.rfc-editor.org/rfc/rfc2616
[RFC3986]
Uniform
Resource
Identifier
(URI):
Generic
Syntax
.
T.
Berners-Lee;
R.
Fielding;
L.
Masinter.
IETF.
January
2005.
Internet
Standard.
URL:
https://www.rfc-editor.org/rfc/rfc3986
[RFC4180]
Common
Format
and
MIME
Type
for
Comma-Separated
Values
(CSV)
Files
.
Y.
Shafranovich.
IETF.
October
2005.
Informational.
URL:
https://www.rfc-editor.org/rfc/rfc4180
[RFC5364]
Extensible
Markup
Language
(XML)
Format
Extension
for
Representing
Copy
Control
Attributes
in
Resource
Lists
.
M.
Garcia-Martin;
G.
Camarillo.
IETF.
October
2008.
Proposed
Standard.
URL:
https://www.rfc-editor.org/rfc/rfc5364
[RFC6741]
Identifier-Locator
Network
Protocol
(ILNP)
Engineering
Considerations
.
RJ
Atkinson;
SN
Bhatti.
IETF.
November
2012.
Experimental.
URL:
https://www.rfc-editor.org/rfc/rfc6741
[RFC8174]
Ambiguity
of
Uppercase
vs
Lowercase
in
RFC
2119
Key
Words
.
B.
Leiba.
IETF.
May
2017.
Best
Current
Practice.
URL:
https://www.rfc-editor.org/rfc/rfc8174
[RFC8259]
The
JavaScript
Object
Notation
(JSON)
Data
Interchange
Format
.
T.
Bray,
Ed..
IETF.
December
2017.
Internet
Standard.
URL:
https://www.rfc-editor.org/rfc/rfc8259
[RFC8428]
Sensor
Measurement
Lists
(SenML)
.
C.
Jennings;
Z.
Shelby;
J.
Arkko;
A.
Keranen;
C.
Bormann.
IETF.
August
2018.
Proposed
Standard.
URL:
https://www.rfc-editor.org/rfc/rfc8428
[RFC8949]
Concise
Binary
Object
Representation
(CBOR)
.
C.
Bormann;
P.
Hoffman.
IETF.
December
2020.
Internet
Standard.
URL:
https://www.rfc-editor.org/rfc/rfc8949
[WebSub]
WebSub
.
Julien
Genestoux;
Aaron
Parecki.
W3C.
23
January
2018.
W3C
Recommendation.
URL:
https://www.w3.org/TR/websub/
[WOT-ARCHITECTURE]
Web
of
Things
(WoT)
Architecture
.
Matthias
Kovatsch;
Ryuichi
Matsukura;
Michael
Lagally;
Toru
Kawaguchi;
Kunihiko
Toumura;
Kazuo
Kajimoto.
W3C.
9
April
2020.
W3C
Recommendation.
URL:
https://www.w3.org/TR/wot-architecture/
[WOT-THING-DESCRIPTION]
Web
of
Things
(WoT)
Thing
Description
.
Sebastian
KÃ¤bisch;
Takuki
Kamiya;
Michael
McCool;
Victor
Charpenay;
Matthias
Kovatsch.
W3C.
9
April
2020.
W3C
Recommendation.
URL:
https://www.w3.org/TR/wot-thing-description/
[XML]
Extensible
Markup
Language
(XML)
1.0
(Fifth
Edition)
.
Tim
Bray;
Jean
Paoli;
Michael
Sperberg-McQueen;
Eve
Maler;
FranÃ§ois
Yergeau
et
al.
W3C.
26
November
2008.
W3C
Recommendation.
URL:
https://www.w3.org/TR/xml/
D.2
Informative
references
[HTTP-in-RDF10]
HTTP
Vocabulary
in
RDF
1.0
.
Johannes
Koch;
Carlos
A.
Velasco;
Philip
Ackermann.
W3C.
2
February
2017.
W3C
Working
Group
Note.
URL:
https://www.w3.org/TR/HTTP-in-RDF10/
[MQTT]
MQTT
Version
5.0
.
Andrew
Banks;
Ed
Briggs;
Ken
Borgendale;
Rahul
Gupta.
MQTT.
07
March
2019.
URL:
https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html
[RFC7231]
Hypertext
Transfer
Protocol
(HTTP/1.1):
Semantics
and
Content
.
R.
Fielding,
Ed.;
J.
Reschke,
Ed..
IETF.
June
2014.
Proposed
Standard.
URL:
https://httpwg.org/specs/rfc7231.html
[RFC7252]
The
Constrained
Application
Protocol
(CoAP)
.
Z.
Shelby;
K.
Hartke;
C.
Bormann.
IETF.
June
2014.
Proposed
Standard.
URL:
https://www.rfc-editor.org/rfc/rfc7252
â†‘
Permalink
Referenced
in:
Â§
4.1
Protocol
Binding
Templates
Permalink
Referenced
in:
Â§
1.
Introduction
Â§
4.1.4
Using
a
Thing
Description
with
a
Protocol
Binding
Template
Subspecification
(2)
(3)
(4)
Â§
4.3
Platform
Binding
Templates
Permalink
Referenced
in:
Â§
1.
Introduction
Â§
4.1
Protocol
Binding
Templates
(2)
Permalink
Referenced
in:
Not
referenced
in
this
document.
Permalink
Referenced
in:
Not
referenced
in
this
document.
Permalink
Referenced
in:
Not
referenced
in
this
document.
Permalink
Referenced
in:
Not
referenced
in
this
document.
Permalink
Referenced
in:
Not
referenced
in
this
document.
Permalink
Referenced
in:
Not
referenced
in
this
document.
Permalink
Referenced
in:
Â§
4.1.4
Using
a
Thing
Description
with
a
Protocol
Binding
Template
Subspecification
Permalink
Referenced
in:
Â§
4.1.4
Using
a
Thing
Description
with
a
Protocol
Binding
Template
Subspecification
Permalink
Referenced
in:
Not
referenced
in
this
document.
Permalink
Referenced
in:
Not
referenced
in
this
document.
Permalink
Referenced
in:
Not
referenced
in
this
document.
Permalink
Referenced
in:
Not
referenced
in
this
document.
Permalink
Referenced
in:
Not
referenced
in
this
document.
Permalink
Referenced
in:
Not
referenced
in
this
document.
Permalink
Referenced
in:
Â§
1.
Introduction
Permalink
Referenced
in:
Â§
4.
Binding
Template
Mechanisms
Â§
4.1.3
Existing
Protocol
Binding
Templates
Â§
4.1.5
Creating
a
new
Protocol
Binding
Template
Subspecification
Permalink
Referenced
in:
Â§
1.
Introduction
Â§
4.1.5
Creating
a
new
Protocol
Binding
Template
Subspecification
Â§
4.2.5
Creating
a
new
Payload
Binding
Template
Subspecification
Â§
4.3
Platform
Binding
Templates
Â§
4.3.1
Existing
Platform
Binding
Templates
Â§
4.3.2
Creating
a
new
Platform
Binding
Template
Subspecification
(2)
(3)
Â§
5.
Examples
of
Thing
Descriptions
with
Protocol
Binding
Templates
Permalink
Referenced
in:
Â§
4.
Binding
Template
Mechanisms
Permalink
Referenced
in:
Â§
3.
Terminology
</del>
<script id=respec-dfn-panel>
(()
=>
{
//
@ts-check
if
(document.respec)
{
document.respec.ready.then(setupPanel);
}
else
{
setupPanel();
}
function
setupPanel()
{
const
listener
=
panelListener();
document.body.addEventListener("keydown",
listener);
document.body.addEventListener("click",
listener);
}
function
panelListener()
{
/**
@type
{HTMLElement}
*/
let
panel
=
null;
return
event
=>
{
const
{
target,
type
}
=
event;
if
(!(target
instanceof
HTMLElement))
return;
//
For
keys,
we
only
care
about
Enter
key
to
activate
the
panel
//
otherwise
it's
activated
via
a
click.
if
(type
===
"keydown"
&&
event.key
!==
"Enter")
return;
const
action
=
deriveAction(event);
switch
(action)
{
case
"show":
{
hidePanel(panel);
/**
@type
{HTMLElement}
*/
const
dfn
=
target.closest("dfn,
.index-term");
panel
=
document.getElementById(`dfn-panel-for-${dfn.id}`);
const
coords
=
deriveCoordinates(event);
displayPanel(dfn,
panel,
coords);
break;
}
case
"dock":
{
panel.style.left
=
null;
panel.style.top
=
null;
panel.classList.add("docked");
break;
}
case
"hide":
{
hidePanel(panel);
panel
=
null;
break;
}
}
};
}
/**
*
@param
{MouseEvent|KeyboardEvent}
event
*/
function
deriveCoordinates(event)
{
const
target
=
/**
@type
HTMLElement
*/
(event.target);
//
We
prevent
synthetic
AT
clicks
from
putting
//
the
dialog
in
a
weird
place.
The
AT
events
sometimes
//
lack
coordinates,
so
they
have
clientX/Y
=
0
const
rect
=
target.getBoundingClientRect();
if
(
event
instanceof
MouseEvent
&&
event.clientX
>
=
rect.left
&&
event.clientY
>
=
rect.top
)
{
//
The
event
probably
happened
inside
the
bounding
rect...
return
{
x:
event.clientX,
y:
event.clientY
};
}
//
Offset
to
the
middle
of
the
element
const
x
=
rect.x
+
rect.width
/
2;
//
Placed
at
the
bottom
of
the
element
const
y
=
rect.y
+
rect.height;
return
{
x,
y
};
}
/**
*
@param
{Event}
event
*/
function
deriveAction(event)
{
const
target
=
/**
@type
{HTMLElement}
*/
(event.target);
const
hitALink
=
!!target.closest("a");
if
(target.closest("dfn:not([data-cite]),
.index-term"))
{
return
hitALink
?
"none"
:
"show";
}
if
(target.closest(".dfn-panel"))
{
if
(hitALink)
{
return
target.classList.contains("self-link")
?
"hide"
:
"dock";
}
const
panel
=
target.closest(".dfn-panel");
return
panel.classList.contains("docked")
?
"hide"
:
"none";
}
if
(document.querySelector(".dfn-panel:not([hidden])"))
{
return
"hide";
}
return
"none";
}
/**
*
@param
{HTMLElement}
dfn
*
@param
{HTMLElement}
panel
*
@param
{{
x:
number,
y:
number
}}
clickPosition
*/
function
displayPanel(dfn,
panel,
{
x,
y
})
{
panel.hidden
=
false;
//
distance
(px)
between
edge
of
panel
and
the
pointing
triangle
(caret)
const
MARGIN
=
20;
const
dfnRects
=
dfn.getClientRects();
//
Find
the
`top`
offset
when
the
`dfn`
can
be
spread
across
multiple
lines
let
closestTop
=
0;
let
minDiff
=
Infinity;
for
(const
rect
of
dfnRects)
{
const
{
top,
bottom
}
=
rect;
const
diffFromClickY
=
Math.abs((top
+
bottom)
/
2
-
y);
if
(diffFromClickY
< minDiff) { minDiff = diffFromClickY; closestTop = top; } } const top = window.scrollY + closestTop + dfnRects[0].height; const left = x - MARGIN; panel.style.left = `${left}px`; panel.style.top = `${top}px`; // Find if the panel is flowing out of the window const panelRect = panel.getBoundingClientRect(); const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width); if (panelRect.right >
SCREEN_WIDTH)
{
const
newLeft
=
Math.max(MARGIN,
x
+
MARGIN
-
panelRect.width);
const
newCaretOffset
=
left
-
newLeft;
panel.style.left
=
`${newLeft}px`;
/**
@type
{HTMLElement}
*/
const
caret
=
panel.querySelector(".caret");
caret.style.left
=
`${newCaretOffset}px`;
}
//
As
it's
a
dialog,
we
trap
focus.
//
TODO:
when
<dialog>
becomes
a
implemented,
we
should
really
//
use
that.
trapFocus(panel,
dfn);
}
/**
*
@param
{HTMLElement}
panel
*
@param
{HTMLElement}
dfn
*
@returns
*/
function
trapFocus(panel,
dfn)
{
/**
@type
NodeListOf
<HTMLAnchorElement>
elements
*/
const
anchors
=
panel.querySelectorAll("a[href]");
//
No
need
to
trap
focus
if
(!anchors.length)
return;
//
Move
focus
to
first
anchor
element
const
first
=
anchors.item(0);
first.focus();
const
trapListener
=
createTrapListener(anchors,
panel,
dfn);
panel.addEventListener("keydown",
trapListener);
//
Hiding
the
panel
releases
the
trap
const
mo
=
new
MutationObserver(records
=>
{
const
[record]
=
records;
const
target
=
/**
@type
HTMLElement
*/
(record.target);
if
(target.hidden)
{
panel.removeEventListener("keydown",
trapListener);
mo.disconnect();
}
});
mo.observe(panel,
{
attributes:
true,
attributeFilter:
["hidden"]
});
}
/**
*
*
@param
{NodeListOf
<HTMLAnchorElement>
}
anchors
*
@param
{HTMLElement}
panel
*
@param
{HTMLElement}
dfn
*
@returns
*/
function
createTrapListener(anchors,
panel,
dfn)
{
const
lastIndex
=
anchors.length
-
1;
let
currentIndex
=
0;
return
event
=>
{
switch
(event.key)
{
//
Hitting
"Tab"
traps
us
in
a
nice
loop
around
elements.
case
"Tab":
{
event.preventDefault();
currentIndex
+=
event.shiftKey
?
-1
:
+1;
if
(currentIndex
< 0) { currentIndex = lastIndex; } else if (currentIndex >
lastIndex)
{
currentIndex
=
0;
}
anchors.item(currentIndex).focus();
break;
}
//
Hitting
"Enter"
on
an
anchor
releases
the
trap.
case
"Enter":
hidePanel(panel);
break;
//
Hitting
"Escape"
returns
focus
to
dfn.
case
"Escape":
hidePanel(panel);
dfn.focus();
return;
}
};
}
/**
@param
{HTMLElement}
panel
*/
function
hidePanel(panel)
{
if
(!panel)
return;
panel.hidden
=
true;
panel.classList.remove("docked");
}
})()
</script>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js">
</script>

